language: node_js
node_js:
  - "7"
before_install:
  - sudo apt-get -qq update
  - sudo apt-get -qqy install jq curl
  - curl -s -O https://openwhisk.ng.bluemix.net/cli/go/download/linux/amd64/wsk
  - chmod +x wsk
  - echo "AUTH=$WSK_AUTH" > ~/.wskprops
  - echo "APIHOST=$WSK_HOST" >> ~/.wskprops
before_script:
  - export PATH=$PATH:$PWD
install:
  - npm install
script:
  - eslint .
  - npm run coverage
  - node ./node_modules/.bin/istanbul check-coverage --statements 90 --branches 90 --lines 90 --functions 90
env:
  global:
    WSK_HOST=openwhisk.ng.bluemix.net
    WSK_AUTH=5c5820ff-1e7a-44ae-b38a-7b70b215cb8c:AqtqbYpavejPt4fjM5vlzSqpSmdU1QZ3I98hqEYykkbwcybPw4t4IcWpedVOzzFM